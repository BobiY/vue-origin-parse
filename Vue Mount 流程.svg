<svg id="kity_svg_12" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1989" height="888" style="background: #e6eef2;" viewBox="0 0 1989 888"><style>* {margin: 0;padding: 0;}</style><defs id="kity_defs_13"><linearGradient id="kity_linearGradient_24" x1="0" y1="0" x2="0" y2="1"><stop id="kity_stop_25" offset="0" stop-color="rgb(67, 188, 0)"></stop><stop id="kity_stop_26" offset="1" stop-color="rgb(67, 188, 0)"></stop></linearGradient><marker id="kity_marker_0" orient="auto" markerWidth="13" markerHeight="13" refX="12" refY="6"><path id="kity_path_1" fill="#3982fc" stroke="none" d="M2,2 L4,6 L2,11 L12,6 Z"></path></marker><g id="symbol-nwse-resize" style="cursor: pointer;"><path id="kity_path_3" fill="white" stroke="#ccc" d="M16,6A10,10,0,1,1,-4,6A10,10,0,1,1,16,6"></path><path id="kity_path_4" fill="#fdaa28" stroke="none" d="M11.3 12.4l-3.8-.5c-.4 0-.7-.3-.8-.7-.1-.4 0-.8.2-1l.8-.8-4.2-4.2-.8.8c-.2.2-.4.3-.7.3-.5 0-.9-.4-1-.9L.5 1.6c0-.3.1-.6.2-.8.2-.2.5-.3.7-.3h.1l3.8.5c.4 0 .7.3.8.7.1.4 0 .8-.2 1l-.8.8 4.2 4.2.8-.8c.2-.2.4-.3.7-.3.5 0 .9.4 1 .9l.5 3.8c0 .3-.1.6-.2.8-.2.2-.5.3-.7.3h-.1"></path></g><image id="symbol-close-btn" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAhFBMVEUAAAD+wC3+zFX+vyz+vyz+vyz+vyz+vyz+vyz/5af/57D+vy3/4Zz+wjX+vyz+13v+yU3+vyz+vyz+vyz+vyz+vyz+vyz+vyz/673+24r/5ar+vyz+vyz+vyz/46L/673+24j////+vyz/+u/+13n//fj/9uH/+/P/78n+1XT+wTL+y1T7oNo1AAAAIXRSTlMA8+KwiDwSBe38+fb06+nn4cunoX9qNyb86PLMxi/z++fM2sGjAAABhklEQVRIx+2VyZqCMBCEh1X2fRVcKBQB3//9Jl9kBoNBZuBqnXLIn3R1Ot1fH3G12/1nt6rEcihJoRwr6p9OT2RfwCDBl5PF25RAAyMtUN6HFDkgskXX0nXLFW0QOdGb8FIJgCkazbWiujaGaAKQ0jni4APwTsP+gTp5APzDzB0lIJzraqL6LABlyvUhEeJYcXQkjMTzE1GCqz1hIk52HSCvZpQDjvLyggFxTn007W3ce2sb6scDgumbJhrMjBL3/lL/Wr/0d8pkJrRkgsiASLPb9gBhBgLoW5prEZAn6SoA4xHKBT9MTZePMA2gUFnzAuxmPJow44KqsSGwCYhpXAzDEDSyeGrFrYhGpusGYpA7NRMCVsUyLFFZQMi8igToz3XVgah7rjcdkHYrkBWBrbC/Iskbn1L1lwvGV1eU5YriX/HFVn9ktl3sF9oFryntuYTGbUpEqU+Y/LX15QLgpzMNtgTgZWyDzYhzlIftbXx5WGwbSfzBV4yDryCDb9N4XR7iH/H0DcbqhmxM6YxzAAAAAElFTkSuQmCC" x="0" y="0" width="25" height="25" style="cursor: pointer;"></image></defs><g id="kity_g_14"><g id="minder1" text-rendering="optimize-speed" transform="translate( 684 -71 ) matrix( 1 0 0 1 226.5 118 )"><g id="minder_connect_group1" stroke-linecap="round"><path id="kity_path_41" fill="none" stroke="#bdc5c9" stroke-width="2" d="M48,27v20h0.5V57" transform="translate( 0.5 0.5 )"></path><path id="kity_path_43" fill="none" stroke="#bdc5c9" stroke-width="1" d="M49,130v10h-350.5V146" transform="translate( 0 0 )"></path><path id="kity_path_45" fill="none" stroke="#bdc5c9" stroke-width="1" d="M-302,172v6h-157V184" transform="translate( 0 0 )"></path><path id="kity_path_47" fill="none" stroke="#bdc5c9" stroke-width="1" d="M-459,210v6h0V222" transform="translate( 0 0 )"></path><path id="kity_path_49" fill="none" stroke="#bdc5c9" stroke-width="1" d="M-459,264v6h0.5V276" transform="translate( 0 0 )"></path><path id="kity_path_51" fill="none" stroke="#bdc5c9" stroke-width="1" d="M-458,334v6h0V346" transform="translate( 0 0 )"></path><path id="kity_path_53" fill="none" stroke="#bdc5c9" stroke-width="1" d="M-302,172v6h274V184" transform="translate( 0 0 )"></path><path id="kity_path_55" fill="none" stroke="#bdc5c9" stroke-width="1" d="M-28,210v6h0.5V222" transform="translate( 0 0 )"></path><path id="kity_path_57" fill="none" stroke="#bdc5c9" stroke-width="1" d="M-27,248v6h0.5V260" transform="translate( 0 0 )"></path><path id="kity_path_59" fill="none" stroke="#bdc5c9" stroke-width="1" d="M-27,334v6h0V346" transform="translate( 0 0 )"></path><path id="kity_path_61" fill="none" stroke="#bdc5c9" stroke-width="1" d="M49,130v10h350.5V146" transform="translate( 0 0 )"></path><path id="kity_path_63" fill="none" stroke="#bdc5c9" stroke-width="1" d="M399,172v6h0V184" transform="translate( 0 0 )"></path><path id="kity_path_65" fill="none" stroke="#bdc5c9" stroke-width="1" d="M399,210v6h0V222" transform="translate( 0 0 )"></path><path id="kity_path_67" fill="none" stroke="#bdc5c9" stroke-width="1" d="M399,248v6h0V260" transform="translate( 0 0 )"></path><path id="kity_path_69" fill="none" stroke="#bdc5c9" stroke-width="1" d="M399,286v6h0V298" transform="translate( 0 0 )"></path><path id="kity_path_71" fill="none" stroke="#bdc5c9" stroke-width="1" d="M399,324v6h0.5V336" transform="translate( 0 0 )"></path><path id="kity_path_73" fill="none" stroke="#bdc5c9" stroke-width="1" d="M400,362v6h0.5V374" transform="translate( 0 0 )"></path><path id="kity_path_75" fill="none" stroke="#bdc5c9" stroke-width="1" d="M400,400v6h0V412" transform="translate( 0 0 )"></path><path id="kity_path_77" fill="none" stroke="#bdc5c9" stroke-width="1" d="M400,470v6h0V482" transform="translate( 0 0 )"></path><path id="kity_path_79" fill="none" stroke="#bdc5c9" stroke-width="1" d="M400,508v6h0.5V520" transform="translate( 0 0 )"></path><path id="kity_path_94" fill="none" stroke="#bdc5c9" stroke-width="2" d="M825,422v20h0V452" transform="translate( 0.5 0.5 )"></path><path id="kity_path_96" fill="none" stroke="#bdc5c9" stroke-width="1" d="M825,487v10h0V503" transform="translate( 0 0 )"></path><path id="kity_path_98" fill="none" stroke="#bdc5c9" stroke-width="1" d="M825,561v6h0V573" transform="translate( 0 0 )"></path><path id="kity_path_100" fill="none" stroke="#bdc5c9" stroke-width="1" d="M825,599v6h0.5V611" transform="translate( 0 0 )"></path><path id="kity_path_102" fill="none" stroke="#bdc5c9" stroke-width="1" d="M826,637v6h0V649" transform="translate( 0 0 )"></path><path id="kity_path_104" fill="none" stroke="#bdc5c9" stroke-width="1" d="M826,675v6h0V687" transform="translate( 0 0 )"></path><path id="kity_path_106" fill="none" stroke="#bdc5c9" stroke-width="1" d="M826,745v6h0.5V757" transform="translate( 0 0 )"></path><path id="kity_path_108" fill="none" stroke="#bdc5c9" stroke-width="1" d="M826,783v6h0.5V795" transform="translate( 0 0 )"></path></g><g id="minder_selectedRect_group1"></g><g id="minder_rel_line_group1"><g id="minder_rel_line1"><path id="kity_path_173" fill="none" stroke="#3982fc" stroke-width="1" stroke-dasharray="6,3" marker-end="url(#kity_marker_0)" d="M0,0M-558.5,31.5C-727,325.5,-731.5,324.5,-708,324.5"></path><path id="kity_path_174" fill="none" stroke="transparent" stroke-width="8" d="M0,0M-558.5,31.5C-727,325.5,-731.5,324.5,-708,324.5" style="cursor: pointer;"></path></g><g id="minder_rel_line2"><path id="kity_path_176" fill="none" stroke="#3982fc" stroke-width="1" stroke-dasharray="6,3" marker-end="url(#kity_marker_0)" d="M0,0M-627.5,545.5C-469,519,-744.5,358.5,-590,358.5"></path><path id="kity_path_177" fill="none" stroke="transparent" stroke-width="8" d="M0,0M-627.5,545.5C-469,519,-744.5,358.5,-590,358.5" style="cursor: pointer;"></path></g><g id="minder_rel_line3"><path id="kity_path_179" fill="none" stroke="#3982fc" stroke-width="1" stroke-dasharray="6,3" marker-end="url(#kity_marker_0)" d="M0,0M-27,359C-295,555,-283.5,641.5,-364.5,600.5"></path><path id="kity_path_180" fill="none" stroke="transparent" stroke-width="8" d="M0,0M-27,359C-295,555,-283.5,641.5,-364.5,600.5" style="cursor: pointer;"></path></g><g id="minder_rel_line4"><path id="kity_path_182" fill="none" stroke="#3982fc" stroke-width="1" stroke-dasharray="6,3" marker-end="url(#kity_marker_0)" d="M0,0M-116.5,637.5C-246.5,550.5,-388.5,221.5,-99,210"></path><path id="kity_path_183" fill="none" stroke="transparent" stroke-width="8" d="M0,0M-116.5,637.5C-246.5,550.5,-388.5,221.5,-99,210" style="cursor: pointer;"></path></g><g id="minder_rel_line5"><path id="kity_path_185" fill="none" stroke="#3982fc" stroke-width="1" stroke-dasharray="6,3" marker-end="url(#kity_marker_0)" d="M0,0M825,398.5C674.5,259.5,619.5,431.5,569,400"></path><path id="kity_path_186" fill="none" stroke="transparent" stroke-width="8" d="M0,0M825,398.5C674.5,259.5,619.5,431.5,569,400" style="cursor: pointer;"></path></g><g id="minder_rel_line6"><path id="kity_path_188" fill="none" stroke="#3982fc" stroke-width="1" stroke-dasharray="6,3" marker-end="url(#kity_marker_0)" d="M0,0M344.5,639.5C532.5,602.5,595.5,426.5,557,426.5"></path><path id="kity_path_189" fill="none" stroke="transparent" stroke-width="8" d="M0,0M344.5,639.5C532.5,602.5,595.5,426.5,557,426.5" style="cursor: pointer;"></path></g></g><g id="minder_generalize_group1"></g><g id="minder_node1" transform="matrix( 1 0 0 1 0 0 )"><path id="node_outline1" fill="#1cabfc" d="M-20,-27h136a5,5,0,0,1,5,5v44a5,5,0,0,1,-5,5h-136a5,5,0,0,1,-5,-5v-44a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text1" fill="#fff"><foreignObject id="kity_foreignObject_32" width="96" height="24" x="0" y="-12" style="overflow: visible; visibility: visible;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 20px; color: rgb(255, 255, 255);"><p>mount流程</p></div></foreignObject></g></g><g id="kity_g_18"><path id="kity_path_19" fill="none" stroke="none" d="M0,0h0v0h0z"></path></g><g id="kity_g_20"><path id="kity_path_21" fill="none" stroke="none" d="M0,0h0v0h0z"></path><path id="kity_path_22" fill="none" stroke="none"></path></g><g id="minder_node2" transform="matrix( 1 0 0 1 -74 94 )"><path id="node_outline34" fill="#f00" stroke="#ccc" d="M-12,-37h269a3,3,0,0,1,3,3v67a3,3,0,0,1,-3,3h-269a3,3,0,0,1,-3,-3v-67a3,3,0,0,1,3,-3z" stroke-width="1"></path><g id="node_text34" fill="#333"><foreignObject id="kity_foreignObject_229" width="245" style="overflow: visible; visibility: visible;" height="57" x="0" y="-29"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 16px; color: rgb(51, 51, 51);"><p><span style="background-color: rgb(255, 0, 0); color: rgb(255, 255, 255);">这里将 mount 流程分成两部分，</span></p><p><span style="background-color: rgb(255, 0, 0); color: rgb(255, 255, 255);">一部分时 mount 的初始化挂载过程</span></p><p><span style="background-color: rgb(255, 0, 0); color: rgb(255, 255, 255);">一部分时实例化时的调用过程</span></p></div></foreignObject></g></g><g id="minder_node3" transform="matrix( 1 0 0 1 -365 159 )"><path id="node_outline23" fill="transparent" d="M-5,-13h136a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-136a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text23" fill="#333"><foreignObject id="kity_foreignObject_207" width="126" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>实例化前的挂载流程</p></div></foreignObject></g></g><g id="minder_node4" transform="matrix( 1 0 0 1 -637 197 )"><path id="node_outline18" fill="#f00" d="M-5,-13h366a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-366a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text18" fill="#333"><foreignObject id="kity_foreignObject_197" width="356" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p><span style="background-color: rgb(255, 0, 0); color: rgb(255, 255, 255);">入口文件&#xa0;src/platforms/web/entry-runtime-with-compiler.js</span></p></div></foreignObject></g></g><g id="minder_node5" transform="matrix( 1 0 0 1 -571 243 )"><path id="node_outline17" fill="transparent" d="M-5,-21h234a5,5,0,0,1,5,5v32a5,5,0,0,1,-5,5h-234a5,5,0,0,1,-5,-5v-32a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text17" fill="#333"><foreignObject id="kity_foreignObject_195" width="224" style="overflow: visible; visibility: visible;" height="32" x="0" y="-16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>这个文件是整个Vue 的打包入口文件</p><p>这里对 $mount 进行了重写</p></div></foreignObject></g></g><g id="minder_node6" transform="matrix( 1 0 0 1 -698 305 )"><path id="node_outline16" fill="transparent" d="M-5,-29h489a5,5,0,0,1,5,5v48a5,5,0,0,1,-5,5h-489a5,5,0,0,1,-5,-5v-48a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text16" fill="#333"><foreignObject id="kity_foreignObject_193" width="479" style="overflow: visible; visibility: visible;" height="48" x="0" y="-24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>保存原来的 $mount 方法</p><p>重写的 $mount 方法主要做了以下的事情</p><p>根据 render/template/el 从前到后的优先级获取 render 函数挂载到 vue 实例上</p></div></foreignObject></g></g><g id="minder_node7" transform="matrix( 1 0 0 1 -580 359 )"><path id="node_outline15" fill="transparent" d="M-5,-13h253a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-253a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text15" fill="#333"><foreignObject id="kity_foreignObject_191" width="243" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>最终调用保存下来的原来的 mount 方法</p></div></foreignObject></g></g><g id="minder_node8" transform="matrix( 1 0 0 1 -89 197 )"><path id="node_outline22" fill="transparent" d="M-5,-13h132a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-132a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text22" fill="#333"><foreignObject id="kity_foreignObject_205" width="122" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>_render 的挂载过程</p></div></foreignObject></g></g><g id="minder_node9" transform="matrix( 1 0 0 1 -139 235 )"><path id="node_outline21" fill="#f00" d="M-5,-13h233a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-233a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text21" fill="#333"><foreignObject id="kity_foreignObject_203" width="223" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p><span style="color: rgb(255, 255, 255); background-color: rgb(255, 0, 0);">入口文件&#xa0;src/core/instance/render.js</span></p></div></foreignObject></g></g><g id="minder_node10" transform="matrix( 1 0 0 1 -167 297 )"><path id="node_outline20" fill="transparent" d="M-5,-37h290a5,5,0,0,1,5,5v64a5,5,0,0,1,-5,5h-290a5,5,0,0,1,-5,-5v-64a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text20" fill="#333"><foreignObject id="kity_foreignObject_201" width="280" style="overflow: visible; visibility: visible;" height="64" x="0" y="-32"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>这里主要完成以下方法的挂载，这个挂载过程</p><p>发生在 实例化之前</p><p>1. $nextTick 用来异步更新</p><p>2. _render 用来调用 vm.render 生成 vnode</p></div></foreignObject></g></g><g id="minder_node11" transform="matrix( 1 0 0 1 -169 359 )"><path id="node_outline19" fill="#3050fe" d="M-5,-13h294a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-294a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text19" fill="#333"><foreignObject id="kity_foreignObject_199" width="284" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p><span style="background-color: rgb(48, 80, 254); color: rgb(255, 255, 255);">_render 在调用时会完成 $scopedSlots 的挂载</span></p></div></foreignObject></g></g><g id="minder_node12" transform="matrix( 1 0 0 1 336 159 )"><path id="node_outline33" fill="transparent" d="M-5,-13h136a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-136a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text33" fill="#333"><foreignObject id="kity_foreignObject_227" width="126" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>实例化时的调用过程</p></div></foreignObject></g></g><g id="minder_node13" transform="matrix( 1 0 0 1 180 197 )"><path id="node_outline32" fill="#f00" d="M-5,-13h448a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-448a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text32" fill="#333"><foreignObject id="kity_foreignObject_225" width="438" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p><span style="background-color: rgb(255, 0, 0); color: rgb(255, 255, 255);">接着是 $mount 的最初实现，在文件 src/platforms/web/runtime/index.js</span></p></div></foreignObject></g></g><g id="minder_node14" transform="matrix( 1 0 0 1 164 235 )"><path id="node_outline31" fill="transparent" d="M-5,-13h480a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-480a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text31" fill="#333"><foreignObject id="kity_foreignObject_223" width="470" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>$mount 方法会调用 mountComponent 方法使用生成的 render 函数开始渲染</p></div></foreignObject></g></g><g id="minder_node15" transform="matrix( 1 0 0 1 228 273 )"><path id="node_outline30" fill="transparent" d="M-5,-13h352a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-352a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text30" fill="#333"><foreignObject id="kity_foreignObject_221" width="342" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>首先保证实例的 render 函数存在，不存在则给出默认值</p></div></foreignObject></g></g><g id="minder_node16" transform="matrix( 1 0 0 1 314 311 )"><path id="node_outline29" fill="transparent" d="M-5,-13h180a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-180a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text29" fill="#333"><foreignObject id="kity_foreignObject_219" width="170" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>执行 钩子函数 beforeMount</p></div></foreignObject></g></g><g id="minder_node17" transform="matrix( 1 0 0 1 249 349 )"><path id="node_outline28" fill="#ff0000" d="M-5,-13h311a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-311a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text28" fill="#333"><foreignObject id="kity_foreignObject_217" width="301" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p><span style="background-color: rgb(255, 0, 0); color: rgb(255, 255, 255);">接下来是生成组件级更新函数 updateComponent</span></p></div></foreignObject></g></g><g id="minder_node18" transform="matrix( 1 0 0 1 241 387 )"><path id="node_outline27" fill="transparent" d="M-5,-13h328a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-328a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text27" fill="#333"><foreignObject id="kity_foreignObject_215" width="318" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>updateComponent = () =&gt;vm. _update(vm._render)</p></div></foreignObject></g></g><g id="minder_node19" transform="matrix( 1 0 0 1 253 441 )"><path id="node_outline26" fill="transparent" d="M-5,-29h304a5,5,0,0,1,5,5v48a5,5,0,0,1,-5,5h-304a5,5,0,0,1,-5,-5v-48a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text26" fill="#333"><foreignObject id="kity_foreignObject_213" width="294" style="overflow: visible; visibility: visible;" height="48" x="0" y="-24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>将生成的 updateComponent 使用 Watcher 完成</p><p>1. 初始化渲染时的依赖收集过程</p><p>2. 数据状态更新的视图更新</p></div></foreignObject></g></g><g id="minder_node20" transform="matrix( 1 0 0 1 306 495 )"><path id="node_outline25" fill="transparent" d="M-5,-13h198a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-198a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text25" fill="#333"><foreignObject id="kity_foreignObject_211" width="188" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>初始化完成点用&#xa0;mounted 钩子</p></div></foreignObject></g></g><g id="minder_node21" transform="matrix( 1 0 0 1 241 541 )"><path id="node_outline24" fill="transparent" d="M-5,-21h329a5,5,0,0,1,5,5v32a5,5,0,0,1,-5,5h-329a5,5,0,0,1,-5,-5v-32a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text24" fill="#333"><foreignObject id="kity_foreignObject_209" width="319" style="overflow: visible; visibility: visible;" height="32" x="0" y="-16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>判断是不是初始化渲染通过以下条件</p><p>1. vm 的 oldVnode 是否存在,不存在则为初始化渲染</p></div></foreignObject></g></g><g id="minder_node22" transform="matrix( 1 0 0 1 -719.5 31.5 )"><path id="node_outline2" fill="#1cabfc" d="M-20,-55h362a5,5,0,0,1,5,5v100a5,5,0,0,1,-5,5h-362a5,5,0,0,1,-5,-5v-100a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text2" fill="#fff"><foreignObject id="kity_foreignObject_82" width="322" style="overflow: visible; visibility: visible;" height="80" x="0" y="-40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(255, 255, 255);"><p>关于 render 函数解析的优先级</p><p>1. 自定义的 render 函数优先级最高</p><p>2. 然后是 template 通过 complier 编译生成的 render</p><p>3. 最后是传入的 el 属性对应的 dom 元素</p><p>的 outerHtml 获取的 dom 结构生成的 render 函数</p></div></foreignObject></g></g><g id="minder_node23" transform="matrix( 1 0 0 1 -865.5 545.5 )"><path id="node_outline3" fill="#1cabfc" d="M-20,-55h516a5,5,0,0,1,5,5v100a5,5,0,0,1,-5,5h-516a5,5,0,0,1,-5,-5v-100a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text3" fill="#fff"><foreignObject id="kity_foreignObject_86" width="476" style="overflow: visible; visibility: visible;" height="80" x="0" y="-40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(255, 255, 255);"><p>_render 和 mount 的关系</p><p>1. 在调用 mount 时会调用 _render 生成 vnode</p><p>2. 再调用 _update 根据 vnode 生成真实 dom 片段</p><p>3. 最终形态时&#xa0; _update(_render)&#xa0;</p><p>4. 3 中的调用会被包装成组件级的更新函数 updateComponent 控制组件更新&#xa0;</p></div></foreignObject></g></g><g id="minder_node24" transform="matrix( 1 0 0 1 -265.5 637.5 )"><path id="node_outline4" fill="#1cabfc" d="M-20,-31h338a5,5,0,0,1,5,5v52a5,5,0,0,1,-5,5h-338a5,5,0,0,1,-5,-5v-52a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text4" fill="#fff"><foreignObject id="kity_foreignObject_90" width="298" style="overflow: visible; visibility: visible;" height="32" x="0" y="-16"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(255, 255, 255);"><p>_render 挂载到 Vue 原型上发生在</p><p>src/core/instance/index.js 中调用 renderMixin 时</p></div></foreignObject></g></g><g id="minder_node25" transform="matrix( 1 0 0 1 718.5 398.5 )"><path id="node_outline13" fill="#1cabfc" d="M-20,-23h253a5,5,0,0,1,5,5v36a5,5,0,0,1,-5,5h-253a5,5,0,0,1,-5,-5v-36a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text13" fill="#fff"><foreignObject id="kity_foreignObject_126" width="213" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(255, 255, 255);"><p>_update 在 Vue 原型上的挂载过程</p></div></foreignObject></g></g><g id="minder_node26" transform="matrix( 1 0 0 1 663 470 )"><path id="node_outline12" fill="#ff0000" stroke="#ccc" d="M-12,-18h348a3,3,0,0,1,3,3v29a3,3,0,0,1,-3,3h-348a3,3,0,0,1,-3,-3v-29a3,3,0,0,1,3,-3z" stroke-width="1"></path><g id="node_text12" fill="#333"><foreignObject id="kity_foreignObject_124" width="324" style="overflow: visible; visibility: visible;" height="19" x="0" y="-10"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 16px; color: rgb(51, 51, 51);"><p><span style="background-color: rgb(255, 0, 0); color: rgb(255, 255, 255);">触发挂载的源码位置src/core/instance/index.js</span></p></div></foreignObject></g></g><g id="minder_node27" transform="matrix( 1 0 0 1 601 532 )"><path id="node_outline11" fill="transparent" d="M-5,-29h458a5,5,0,0,1,5,5v48a5,5,0,0,1,-5,5h-458a5,5,0,0,1,-5,-5v-48a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text11" fill="#333"><foreignObject id="kity_foreignObject_122" width="448" style="overflow: visible; visibility: visible;" height="48" x="0" y="-24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>在上面的文件中调用&#xa0;lifecycleMixin 开始组件</p><p>生成周期相关函数的挂载</p><p>这里主要会挂载三个，_update(渲染)/$forceUpdate(更新)/$destory(销毁)</p></div></foreignObject></g></g><g id="minder_node28" transform="matrix( 1 0 0 1 663 586 )"><path id="node_outline10" fill="#ff0000" d="M-5,-13h334a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-334a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text10" fill="#333"><foreignObject id="kity_foreignObject_120" width="324" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p><span style="background-color: rgb(255, 0, 0); color: rgb(255, 255, 255);">&#xa0;lifecycleMixin 源码位置 src/core/instance/lifecycle.js</span></p></div></foreignObject></g></g><g id="minder_node29" transform="matrix( 1 0 0 1 749 624 )"><path id="node_outline9" fill="transparent" d="M-5,-13h163a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-163a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text9" fill="#333"><foreignObject id="kity_foreignObject_118" width="153" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>Vue 原型上挂载 _update</p></div></foreignObject></g></g><g id="minder_node30" transform="matrix( 1 0 0 1 749 662 )"><path id="node_outline8" fill="#e040fb" d="M-5,-13h163a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-163a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text8" fill="#333"><foreignObject id="kity_foreignObject_116" width="153" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p><span style="background-color: rgb(224, 64, 251); color: rgb(255, 255, 255);">_update 的渲染流程解析</span></p></div></foreignObject></g></g><g id="minder_node31" transform="matrix( 1 0 0 1 618 716 )"><path id="node_outline7" fill="transparent" d="M-5,-29h425a5,5,0,0,1,5,5v48a5,5,0,0,1,-5,5h-425a5,5,0,0,1,-5,-5v-48a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text7" fill="#333"><foreignObject id="kity_foreignObject_114" width="415" style="overflow: visible; visibility: visible;" height="48" x="0" y="-24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>首先获取实例的 oldVnode， </p><p>1. oldVnode 不存在，说明初始化渲染，则将 vm.$el 当作 oldVnode</p><p>2. oldVnode 存在，则说明是更新过程，</p></div></foreignObject></g></g><g id="minder_node32" transform="matrix( 1 0 0 1 689 770 )"><path id="node_outline6" fill="transparent" d="M-5,-13h284a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-284a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text6" fill="#333"><foreignObject id="kity_foreignObject_112" width="274" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>调用 __patch__ 开启 diff 算法进行 dom 更新</p></div></foreignObject></g></g><g id="minder_node33" transform="matrix( 1 0 0 1 673 808 )"><path id="node_outline5" fill="transparent" d="M-5,-13h317a5,5,0,0,1,5,5v16a5,5,0,0,1,-5,5h-317a5,5,0,0,1,-5,-5v-16a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text5" fill="#333"><foreignObject id="kity_foreignObject_110" width="307" style="overflow: visible; visibility: visible;" height="16" x="0" y="-8"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(51, 51, 51);"><p>接着就是 Vue 的 diff 和 dom 更新/初始渲染的过程</p></div></foreignObject></g></g><g id="minder_node34" transform="matrix( 1 0 0 1 122.5 639.5 )"><path id="node_outline14" fill="#1cabfc" d="M-20,-55h484a5,5,0,0,1,5,5v100a5,5,0,0,1,-5,5h-484a5,5,0,0,1,-5,-5v-100a5,5,0,0,1,5,-5z" stroke-width="0"></path><g id="node_text14" fill="#fff"><foreignObject id="kity_foreignObject_170" width="444" style="overflow: visible; visibility: visible;" height="80" x="0" y="-40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; vertical-align: top; white-space: nowrap; line-height: 1.2; text-align: left; font-size: 14px; color: rgb(255, 255, 255);"><p>关于调用 Watcher 进行依赖收集和视图更新</p><p>1. Vue 的依赖收集和视图更新是一个发布订阅模式</p><p>2. 每一个数据都会对应一个 Dep 用于依赖收集和数据变更通知视图更新</p><p>3.&#xa0; Watcher 中注册的函数会对数据进行引用，当调用时，会触发 Dep 将</p><p>Watcher 加入到 Dep 的订阅者数组中，等待数据更新时被调用</p></div></foreignObject></g></g></g></g></svg>